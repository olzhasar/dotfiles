- hosts: devmachines

  tasks:
    - name: Update apt package list
      become: true
      apt:
        update_cache: yes
      register: apt_update
      retries: 5
      until: apt_update is success

    - name: Upgrade installed packages
      become: true
      apt:
        upgrade: true

    - name: Install core packages
      become: true
      apt:
        pkg:
          - wget
          - curl
          - git
          - htop
          - p7zip
          - unzip
          - xclip
          - tmux
          - fzf
          - ripgrep
          - silversearcher-ag
          - software-properties-common
          - python3-dev
          - python3-pip
